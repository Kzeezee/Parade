/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.12.1/samples
 */

plugins {
    id 'application'
    id 'java'
}

mainClassName = 'com.g2t2.app.Main'

java {
    sourceCompatibility = '21'
    targetCompatibility = '21'
}

repositories {
    mavenCentral()
}

dependencies {
    // External libraries can be added here, for example:
    // implementation 'org.apache.commons:commons-lang3:3.12.0'
}

sourceSets {
    main {
        java {
            srcDirs = ['src']
        }
        resources {
            srcDirs = ['images']
        }
    }
}

tasks.withType(JavaCompile).configureEach {
    destinationDirectory = file("$rootDir/classes")
}

run {
    // standardInput = System.in
    classpath = files("$rootDir/classes")
}

jar {
    destinationDirectory = file("$rootDir/classes")  // Store JAR in 'classes'
    from {
        fileTree(dir: "$rootDir/classes", includes: ["**/*.class"]) // Include compiled .class files from 'classes/'
    }
    manifest {
        attributes(
            'Main-Class': mainClassName       // Ensure correct main class path
        )
    }

    // Ensure that jar task runs only after compiling Java code
    dependsOn compileTestJava
}
